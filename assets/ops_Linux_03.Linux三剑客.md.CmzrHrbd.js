import{_ as d}from"./chunks/ArticleMetadata.BPSr9oED.js";import{_ as g,E as y,c as D,o as n,j as r,I as l,aj as F,w as p,b as t,e,a as C}from"./chunks/framework._AF764y6.js";const N=JSON.parse('{"title":"Linux三剑客","description":"","frontmatter":{"title":"Linux三剑客","date":"2023-10-26T22:14:20.000Z","permalink":"/linux/grep-sed-awk/","categories":["运维","Linux"],"tags":["linux"],"author":"Manaphy"},"headers":[],"relativePath":"ops/Linux/03.Linux三剑客.md","filePath":"ops/Linux/03.Linux三剑客.md","lastUpdated":1743259133000}'),c={name:"ops/Linux/03.Linux三剑客.md"},o=r("h1",{id:"案例文本",tabindex:"-1"},[C("案例文本 "),r("a",{class:"header-anchor",href:"#案例文本","aria-label":"Permalink to “案例文本”"},"​")],-1),A=F(`<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span>I</span></span>
<span class="line"><span>I teach linux.</span></span>
<span class="line"><span>I like badminton ball ,billiard ball and chinese chess!</span></span>
<span class="line"><span>my name is Manaphy chen</span></span>
<span class="line"><span></span></span>
<span class="line"><span>my qq is 535395726</span></span>
<span class="line"><span></span></span>
<span class="line"><span>not 5353595726</span></span>
<span class="line"><span>my god ,i am not manaphy,but MANAPHY!</span></span></code></pre></div><h1 id="三剑客的特点及应用场景" tabindex="-1">三剑客的特点及应用场景 <a class="header-anchor" href="#三剑客的特点及应用场景" aria-label="Permalink to “三剑客的特点及应用场景”">​</a></h1>`,2),B=F('<table tabindex="0"><thead><tr><th style="text-align:left;"><strong>命令</strong></th><th style="text-align:left;"><strong>特点</strong></th><th style="text-align:left;"><strong>场景</strong></th></tr></thead><tbody><tr><td style="text-align:left;">grep</td><td style="text-align:left;">过滤</td><td style="text-align:left;">grep命令过滤速度是最快的</td></tr><tr><td style="text-align:left;">sed</td><td style="text-align:left;">替换 修改文件内容 取行</td><td style="text-align:left;">如果要进行替换/修改文件内容<br>取出某个范围的内容(从早上10:00到11:00)</td></tr><tr><td style="text-align:left;">awk</td><td style="text-align:left;">取列 统计计算</td><td style="text-align:left;">取列<br>对比 比较<br>统计 计算</td></tr></tbody></table><h1 id="grep" tabindex="-1">grep <a class="header-anchor" href="#grep" aria-label="Permalink to “grep”">​</a></h1>',2),b=F(`<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 命令含义</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-E</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # ==egrep 支持扩展正则</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-A</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # -after -A5 匹配你要的内容及显示接下来的5行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-B</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # before -B5 匹配你要的内容及显示接上面的5行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-C</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # context -C5 匹配你要的内容及显示上下5行内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-c</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 统计出现了多少行 类似于 wc -l</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-v</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 排除</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-n</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 显示行号</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-i</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 忽略大小写</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-w</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 精确匹配</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># -c 统计出现了多少行案例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ps -ef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sshd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      1031</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Nov12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        00:00:02</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /usr/sbin/sshd</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -D</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     14992</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  1031</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 21:40</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sshd:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root@pts/0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     17242</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 14995</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 22:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --color=auto</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sshd</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ps -ef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sshd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">wc</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -l</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ps -ef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sshd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">3</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># -v 排除案例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ps -ef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> crond</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       512</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Nov12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        00:00:04</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /usr/sbin/crond</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     17585</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 14995</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 22:03</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --color=auto</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> crond</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ps -ef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> crond</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# pkill crond</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ps -ef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> crond</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     17617</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 14995</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 22:03</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --color=auto</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> crond</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #会把自己过滤出来</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ps -ef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> crond</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #容易导致判断进程状态失误</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ps -ef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> crond</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> grep</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #此时就不会把自己过滤出来</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ps -ef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> crond</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> grep</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">wc</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -l</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# systemctl start crond</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ps -ef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> crond</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> grep</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 该写法排除grep自己</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     18190</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 22:08</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /usr/sbin/crond</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ps -ef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [c]rond </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 也能排除 原因是 grep执行时进程名为[c]rond 匹配时进程名为crond</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     18190</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 22:08</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /usr/sbin/crond</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># -w 精确匹配</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# echo chen chengp abchen manaphychen </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">chen</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chengp</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> abchen</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphychen</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #所有chen都被标红</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# echo chen chengp abchen manaphychen </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">chen</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chengp</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> abchen</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphychen</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #只有第一个chen被标红</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# echo chen chengp abchen manaphychen </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;\\bchen\\b&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #b表示边界</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">chen</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chengp</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> abchen</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphychen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# echo chen chengp abchen manaphychen </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;\\&lt;chen\\&gt;&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #&lt;&gt;也表示边界</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">chen</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chengp</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> abchen</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphychen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# grep -w 22 /etc/services </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 实际应用 只显示端口号为22的服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">             22/tcp</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">                          # The Secure Shell (SSH) Protocol</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">             22/udp</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">                          # The Secure Shell (SSH) Protocol</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">             22/sctp</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">                 # SSH</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">c1222-acse</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      1153/tcp</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">                # ANSI C12.22 Port</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">c1222-acse</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      1153/udp</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">                # ANSI C12.22 Port</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 匹配正则表达式(只能支持基础正则)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ^my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> hi.txt</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #匹配以my开头的行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> $26 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">hi.txt</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #匹配以26结尾的行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">cat</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -A</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> hi.txt</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #显示文件内容时,在末尾添加$符</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ^</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">hi.txt</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #匹配空行 -n 显示行号</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ^</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">hi.txt</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #排除空行</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 支持扩展正则</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">egrep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> q+</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> hi.txt</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -E</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> q+</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> hi.txt</span></span></code></pre></div><p><strong>正则符号分类</strong></p><table tabindex="0"><thead><tr><th style="text-align:left;"><strong>分类</strong></th><th style="text-align:left;"></th><th style="text-align:left;"><strong>命令</strong></th></tr></thead><tbody><tr><td style="text-align:left;">基础正则 Basic RE(BRE)</td><td style="text-align:left;">^ $ ^$ . * .* [a-z] [^abc]</td><td style="text-align:left;">grep/sed/awk</td></tr><tr><td style="text-align:left;">扩展正则 Extended RE (ERE)</td><td style="text-align:left;">- | () {} ?</td><td style="text-align:left;">egrep/sed -r/awk</td></tr></tbody></table><h1 id="sed" tabindex="-1">sed <a class="header-anchor" href="#sed" aria-label="Permalink to “sed”">​</a></h1>`,8),m=F(`<h2 id="特点及格式" tabindex="-1">特点及格式 <a class="header-anchor" href="#特点及格式" aria-label="Permalink to “特点及格式”">​</a></h2><ul><li><p>sed stream editor 流编辑器，sed把处理的内容(文件)，当做是水,源源不断的进行处理，知道文件末尾</p></li><li><p>sed 格式 | <strong>命令</strong> | <strong>选项</strong> | <strong>(s)sed命令功能 (g)修饰符</strong> | <strong>参数(文件)</strong> | | :-- | :-- | :-- | :-- | | sed | -r | &#39;s#manaphy#chen#g&#39; | hi.txt |</p></li><li><p>sed 命令核心功能 增删改查 | <strong>功能</strong> | | | :-- | :-- | | s | 替换 substitute sub | | p | 显示 print | | d | 删除 delete | | cai | 增加 c/a/i |</p></li></ul><h2 id="sed命令执行过程" tabindex="-1">sed命令执行过程 <a class="header-anchor" href="#sed命令执行过程" aria-label="Permalink to “sed命令执行过程”">​</a></h2><ul><li>四个字描述: 老牛逼啦 &#39;找谁干啥&#39;</li><li>找谁: 你要哪一行</li><li>干啥: 增删改查</li></ul><h2 id="sed核心应用" tabindex="-1">sed核心应用 <a class="header-anchor" href="#sed核心应用" aria-label="Permalink to “sed核心应用”">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 查找</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;1p&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> 								# 指定行号进行查找</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;1,5p&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">							# 指定行号范围进行查找</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;/chen/p&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> 					# 类似于grep过滤,//里面可以写正则</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;/10:00/,/11:00/p&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> 	# 表示指定范围的过滤(如果结尾找不到,则会一直显示到文件末尾)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 删除</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;1d&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">								# 不显示指定行(与查找类似)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 增加</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">c</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # replace 替代 替代这行的内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">a</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # append 追加 向指定的行或每一行追加内容(行后面) 类似于&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">i</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # insert 插入 向指定的行或每一行插入内容(行前面) 类似于&gt;&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 替换</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">s###g</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # substitute 替换 g-&gt;global 全局替换 sed默认只替换每行第一个匹配的内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">s@@@g</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 也可使用其他没什么含义的符号如@</span></span></code></pre></div><h3 id="指定行号" tabindex="-1">指定行号 <a class="header-anchor" href="#指定行号" aria-label="Permalink to “指定行号”">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -n </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;2p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># \`p\`一般都会搭配\`-n\`一起使用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> like</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> badminton</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,billiard</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chinese</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chess!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -n </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;$p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 最后一行</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;2p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 不加会输出所有内容,找到的内容会多输出一次</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> linux.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> like</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> badminton</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,billiard</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chinese</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chess!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> like</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> badminton</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,billiard</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chinese</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chess!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Manaphy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qq</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 535395726</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">not</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5353595726</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> god</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> am</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphy,but</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MANAPHY!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -n </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;1,3p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 指定范围</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> linux.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> like</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> badminton</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,billiard</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chinese</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chess!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Manaphy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -n </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;7,$p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 从第7行到最后一行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">not</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5353595726</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> god</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> am</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphy,but</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MANAPHY!</span></span></code></pre></div><h3 id="过滤" tabindex="-1">过滤 <a class="header-anchor" href="#过滤" aria-label="Permalink to “过滤”">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -n </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/53/p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#包含53的一行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qq</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 535395726</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">not</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5353595726</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -n </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/chen/p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 包含chen的一行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Manaphy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -n </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/[ab]/p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 包含a或b的一行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> linux.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> like</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> badminton</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,billiard</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chinese</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chess!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Manaphy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> god</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> am</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphy,but</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MANAPHY!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -n </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/[0-9]/p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qq</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 535395726</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">not</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5353595726</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -n </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/[0-9]+/p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 不支持扩展正则</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -nr </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/[0-9]+/p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 使用\`-r\`支持扩展正则</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qq</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 535395726</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">not</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5353595726</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -n </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/11:02:30/p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> access.log </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#查看11:02:30的访问日志</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -n </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/11:02:30/,/11:03:30/p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> access.log </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#查看11:02:30-11:02:30内的访问日志</span></span></code></pre></div><h3 id="sed-删除-不显示" tabindex="-1">sed-删除(不显示) <a class="header-anchor" href="#sed-删除-不显示" aria-label="Permalink to “sed-删除(不显示)”">​</a></h3><blockquote><p>将查找的p换成d即可</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;2d&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> linux.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Manaphy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qq</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 535395726</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">not</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5353595726</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> god</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> am</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphy,but</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MANAPHY!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 常用案例: 删除文件中的空行和包含#号的行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">egrep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;^$|#&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/ssh/sshd_config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;/^$|#/d&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/ssh/sshd_config</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># !号的妙用(取反)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -nr</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;/^$|#/!p&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/ssh/sshd_config</span></span></code></pre></div><h3 id="sed-增加cai" tabindex="-1">sed-增加cai <a class="header-anchor" href="#sed-增加cai" aria-label="Permalink to “sed-增加cai”">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;2a hello world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 追加</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> linux.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> like</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> badminton</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,billiard</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chinese</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chess!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">hello</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> world</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Manaphy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qq</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 535395726</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">not</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5353595726</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> god</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> am</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphy,but</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MANAPHY!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;2i hello world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 插入</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> linux.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">hello</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> world</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> like</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> badminton</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,billiard</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chinese</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chess!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Manaphy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qq</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 535395726</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">not</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5353595726</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> god</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> am</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphy,but</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MANAPHY!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;2c hello world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 替换</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> linux.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">hello</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> world</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Manaphy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qq</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 535395726</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">not</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5353595726</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> god</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> am</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphy,but</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MANAPHY!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 常用案例: 向 daemon.json 追加内容</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 方法一:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">tee</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> daemon.json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;&lt;-</span><span style="--shiki-light:#032F62;--shiki-dark:#ADBAC7;">&#39;EOF&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &quot;registry-mirrors&quot;: [&quot;https://docker.mirrors.ustc.edu.cn&quot;]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ADBAC7;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 方法二: -i 将结果输出到原文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed -i </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;1a &quot;data-root&quot;:&quot;/home/docker&quot;,&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> daemon.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# cat daemon.json </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&quot;data-root&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&quot;/home/docker&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  &quot;registry-mirrors&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h3 id="sed-替换" tabindex="-1">sed 替换 <a class="header-anchor" href="#sed-替换" aria-label="Permalink to “sed 替换”">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;s#[0-9]#@#g&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> linux.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> like</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> badminton</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,billiard</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chinese</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chess!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Manaphy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qq</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @@@@@@@@@</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @@@@@@@@@@</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> god</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> am</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphy,but</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MANAPHY!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sed </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;s#[0-9]#@#&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 不使用g只会替换第一个匹配的内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> linux.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> like</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> badminton</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,billiard</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chinese</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chess!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Manaphy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qq</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @35395726</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @353595726</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> god</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> am</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> manaphy,but</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MANAPHY!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# sshd -T </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kexalgorithms</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;s/,/\\n/g&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">kexalgorithms</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> curve25519-sha256</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">curve25519-sha256@libssh.org</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ecdh-sha2-nistp256</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ecdh-sha2-nistp384</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ecdh-sha2-nistp521</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">diffie-hellman-group-exchange-sha256</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">diffie-hellman-group16-sha512</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">diffie-hellman-group18-sha512</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">diffie-hellman-group14-sha256</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">diffie-hellman-group14-sha1</span></span></code></pre></div><ul><li><strong>后向引用</strong>,反向引用</li></ul><p>口诀: 先保护,再使用</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# echo 123456</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">123456</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 案例1: 要给123456左右加上&lt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# echo 123456 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;s#(.*)#&lt;\\1&gt;#g&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">23456&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 案例2: 将manaphy_chen-&gt;chen_manaphy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# echo manaphy_chen</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">manaphy_chen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# echo manaphy_chen </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;s#(^.*)_(.*$)#\\1\\2#g&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">manaphychen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# echo manaphy_chen </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;s#(^.*)_(.*$)#\\2_\\1#g&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">chen_manaphy</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 案例3: 过滤出本机ip地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ip a s eth0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> eth0:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">BROADCAST,MULTICAST,UP,LOWER_U</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">P</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mtu</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1500</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qdisc</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pfifo_fast</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> UP</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> group</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> qlen</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    link/ether</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:16:3e:0c:6c:e8</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> brd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ff:ff:ff:ff:ff:ff</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    inet</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 172.16.127.14/20</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> brd</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 172.16.127.255</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> scope</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dynamic</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> eth0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">       valid_lft</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 312652259sec</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> preferred_lft</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 312652259sec</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ip a s eth0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;3p&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    inet</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 172.16.127.14/20</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> brd</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 172.16.127.255</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> scope</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> dynamic</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> eth0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ip a s eth0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;3p&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;s#(.*)inet (.*)/(.*$)#\\2#g&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">172.16.127.14</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 案例4: stat /etc/hosts取出权限644</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# stat /etc/hosts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  File:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ‘/etc/hosts’</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  Size:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 136</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">             Blocks:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 8</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          IO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Block:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4096</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   regular</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> file</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Device:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> fd01h/64769d</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    Inode:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 655414</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      Links:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Access:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (0644/-rw-r--r--)  Uid: (    </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">0/</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    root</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)   Gid: (    </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">0/</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    root</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Access:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 2021-12-13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 15:41:17.741871339</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +0800</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Modify:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 2020-02-07</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 14:26:57.642000000</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +0800</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Change:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 2020-02-07</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 14:26:57.642000000</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +0800</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Birth:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# stat /etc/hosts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;4p&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Access:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (0644/-rw-r--r--)  Uid: (    </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">0/</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    root</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)   Gid: (    </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">0/</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    root</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# stat /etc/hosts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;4p&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;s#^.*\\(0(.*)\\/-.*#\\1#g&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">644</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# stat -c%a /etc/hosts </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 本身自带取出权限命令</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">644</span></span></code></pre></div><h1 id="awk" tabindex="-1">awk <a class="header-anchor" href="#awk" aria-label="Permalink to “awk”">​</a></h1>`,21),E=F(`<h2 id="特点与应用场景" tabindex="-1">特点与应用场景 <a class="header-anchor" href="#特点与应用场景" aria-label="Permalink to “特点与应用场景”">​</a></h2><p>awk是一门语言，类似于C语言</p><ul><li>过滤</li><li>统计，计算</li><li>过滤，统计日志</li></ul><h2 id="执行过程" tabindex="-1">执行过程 <a class="header-anchor" href="#执行过程" aria-label="Permalink to “执行过程”">​</a></h2><ul><li>读取文件之前</li></ul><p>-F或-v (命令赋值或命令行参数)</p><p>执行 BEGIN{} (执行里面的内容，会在awk读取文件前执行)</p><ul><li>读取文件内容</li></ul><p>读取一行<br>判断是否满足条件并执行对应动作<br>判断是否是最后一行EOF (End Of File) 否-&gt;继续读取下一行<br>结束读取，并显示执行的结果</p><ul><li>读取文件之后</li></ul><p>执行 END{}</p><h3 id="行与列" tabindex="-1">行与列 <a class="header-anchor" href="#行与列" aria-label="Permalink to “行与列”">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;"><strong>名词</strong></th><th style="text-align:left;"><strong>awk中叫法</strong></th><th style="text-align:left;"><strong>一些说明</strong></th></tr></thead><tbody><tr><td style="text-align:left;">行</td><td style="text-align:left;">记录 record</td><td style="text-align:left;">每一行默认通过回车分割的</td></tr><tr><td style="text-align:left;">列</td><td style="text-align:left;">字段 域 field</td><td style="text-align:left;">每一列默认通过空格分割的</td></tr></tbody></table><p>awk中行和列结束标记都是可以修改的</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 取行命令</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">NR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=1</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 取出某一行 NR[Number of Record 记录号,行号]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">NR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">NR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;=5 </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">取出1到5行</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 范围</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">= </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">= == </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 符号</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">/chen/</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 匹配</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">/10/,/15/</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 范围</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#取列</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-F</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 指定分隔符 指定每一列结束标记(是空格,连续的空格,tab键)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$n </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 取出某一列</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">$0</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 取出整行内容</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">$2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">$5</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # 取出第2列和第5列</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{print xxx} # 输出内容</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$NF </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#最后一列 NF[Number of Field 每行有多少字段(列)]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">FS</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # FS[Field Separator 字段分隔符,每个字段结束标记]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">OFS</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # OFS[Output Field Separator 输出字段分隔符,默认为空格]</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 取行</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;NR==1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> linux.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;NR&gt;=1 &amp;&amp; NR&lt;=3&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> linux.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> like</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> badminton</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ,billiard</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ball</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chinese</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chess!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Manaphy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/chen/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> hi.txt </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">my</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Manaphy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# seq 10 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;/3/,/5/&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#取列</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ll </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{print $5}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">4096</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">93</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">4096</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">4096</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">172</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ll </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;NR==3 {print $0}&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # $0 取出整行内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-rw-r--r--</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    93</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 22:42</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> daemon.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ll </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{print $5,$9}&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">column</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -t</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # column -t将内容对齐</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">4096</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   admin-server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">93</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     daemon.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">4096</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   deploy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">4096</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   docker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">172</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    hi.txt</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 案例1: 取出passwd 第一列和最后一列</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# head -5 /etc/passwd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -F:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{print $1,$NF}&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">column</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -t</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">bin</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     /sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">daemon</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  /sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">adm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     /sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lp</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      /sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# head -5 /etc/passwd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -F:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{print $1&quot;@&quot;$NF}&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #在第一列和最后一列之间插入@</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root@/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">bin@/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">daemon@/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">adm@/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lp@/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 案例2: 调用passwd的第一列和最后一列,然后显示每一行内容</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# head -5 /etc/passwd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -F:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -vOFS=:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{print $NF,$2,$3,$4,$5,$6,$1}&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">/bin/bash:x:0:0:root:/root:root</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">/sbin/nologin:x:1:1:bin:/bin:bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">/sbin/nologin:x:2:2:daemon:/sbin:daemon</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">/sbin/nologin:x:3:4:adm:/var/adm:adm</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">/sbin/nologin:x:4:7:lp:/var/spool/lpd:lp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 案例3: 取出ip地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# ip a s eth0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -F</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;[ /]+&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;NR==3{print $3}&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # [ /]+ 以\` \`或\`/\`分割</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">172.16.127.14</span></span></code></pre></div><h3 id="awk模式匹配" tabindex="-1">awk模式匹配 <a class="header-anchor" href="#awk模式匹配" aria-label="Permalink to “awk模式匹配”">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 案例1: 在passwd中找出第三列是以1开头的  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# awk -F: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;$3~/^1/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> /etc/passwd </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># ~表示包括 !~表示不包括</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">bin:x:1:1:bin:/bin:/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">operator:x:11:0:operator:/root:/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">games:x:12:100:games:/usr/games:/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ftp:x:14:50:FTP</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> User:/var/ftp:/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">systemd-network:x:192:192:systemd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Network</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Management:/:/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">chen:x:1000:1000::/home/chen:/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 案例2: 找出第3列以2开头的行,并显示第1列,第3列和最后一列</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# awk -F: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;$3~/^2/{print $1,$3,$NF}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> /etc/passwd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">daemon</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">nscd</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 28</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /sbin/nologin</span></span></code></pre></div><h3 id="特殊模式begin-和end" tabindex="-1">特殊模式BEGIN{}和END{} <a class="header-anchor" href="#特殊模式begin-和end" aria-label="Permalink to “特殊模式BEGIN{}和END{}”">​</a></h3><p>**BEGIN{} **在awk读取文件之前执行</p><ul><li>进行简单统计 计算 不涉及读取文件</li><li>用来处理文件之前，添加个表头</li><li>用来定义awk变量</li></ul><p><strong>END{}</strong> 在awk读取文件之后执行</p><ul><li>awk要进行统计，一般先进行计算，最后END里面输出结果</li><li>awk使用数组，用来输出数组结果</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 输出/etc/services有多少空行</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/^$/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> /etc/services </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">wc</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -l</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">17</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/^$/{i++}END{print i}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> /etc/services</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">17</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 输出1+2+3+...+100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# seq 100 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{sum+=$1}END{print sum}&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">5050</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# seq 100 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{sum+=$1;print sum}END{print sum}&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #显示累加过程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">6</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">15</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">...</span></span></code></pre></div><h3 id="awk数组" tabindex="-1">awk数组 <a class="header-anchor" href="#awk数组" aria-label="Permalink to “awk数组”">​</a></h3><ul><li>统计日志</li><li>统计次数: 统计每个ip出现次数，统计每种状态码出现次数，统计系统中每个用户被攻击的次数，统计攻击者ip出现次数</li><li>累加求和: 统计每个ip消耗的流量</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;BEGIN{a[0]=10086;a[1]=chen;print a[0],a[1]}&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">10086</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 以上\`chen\`没有输出,因为awk字母会被识别为变量,如果只是想使用字符串需要使用双引号</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;BEGIN{a[0]=10086;a[1]=&quot;chen&quot;;print a[0],a[1]}&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">10086</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;BEGIN{a[0]=10086;a[1]=&quot;chen&quot;;for(i in a) print a[i]}&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #  输出输出数组方式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">10086</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">chen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;BEGIN{a[0]=10086;a[1]=&quot;chen&quot;;for(i in a) print i,a[i]}&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10086</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chen</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 统计access.log中ip出现次数 使用\`sort -rnk2\`从高到低排序 [r:逆序n:数字k2:第二列]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy logs]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;{arr[$1]++}END{for(i in arr)print i,arr[i]}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> access.log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sort</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -rnk2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">head</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">220.180.54.100</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1573</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">101.226.179.181</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 604</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">80.82.70.187</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 499</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">42.51.60.94</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 308</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">36.248.211.71</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 301</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">49.234.213.51</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 300</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">117.74.135.35</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 300</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">101.251.242.238</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 248</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">60.191.36.75</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 218</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">183.136.248.116</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 215</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 统计状态码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy logs]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;{arr[$9]++}END{for(i in arr)print i,arr[i]}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> access.log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sort</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -rnk2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">head</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">200</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 15195</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">404</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5106</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">403</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4155</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">400</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1802</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">405</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1739</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&quot;-&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1693</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">157</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 689</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">301</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 125</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">304</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 55</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">SP1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 40</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 过滤不正确的状态码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy logs]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;$9~/[0-9][0-9][0-9]/{arr[$9]++}END{for(i in arr)print i,arr[i]}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> access.log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sort</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -rnk2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">head</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">200</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 15195</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">404</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5106</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">403</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4155</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">400</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1802</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">405</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1739</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">157</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 689</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">301</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 125</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">304</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 55</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">502</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 17</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">408</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 14</span></span></code></pre></div><h3 id="awk循环" tabindex="-1">awk循环 <a class="header-anchor" href="#awk循环" aria-label="Permalink to “awk循环”">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# awk </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;BEGIN{for(i=1;i&lt;=100;i++)sum+=i;print sum}&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">5050</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# echo I like badminton ball ,billiard ball and chinese chess</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">awk</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -F</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;[ ,]&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;{for(i=1;i&lt;=NF;i++) if(length($i)&lt;6)print $i}&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">like</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ball</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ball</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">and</span></span></code></pre></div>`,29);function u(s,f,x,v,M,_){const h=d,k=y("ClientOnly");return n(),D("div",null,[o,l(k,null,{default:p(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(n(),t(h,{key:0,article:s.$frontmatter},null,8,["article"])):e("",!0)]}),_:1}),A,l(k,null,{default:p(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(n(),t(h,{key:0,article:s.$frontmatter},null,8,["article"])):e("",!0)]}),_:1}),B,l(k,null,{default:p(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(n(),t(h,{key:0,article:s.$frontmatter},null,8,["article"])):e("",!0)]}),_:1}),b,l(k,null,{default:p(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(n(),t(h,{key:0,article:s.$frontmatter},null,8,["article"])):e("",!0)]}),_:1}),m,l(k,null,{default:p(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(n(),t(h,{key:0,article:s.$frontmatter},null,8,["article"])):e("",!0)]}),_:1}),E])}const q=g(c,[["render",u]]);export{N as __pageData,q as default};
