import{_ as s,c as i,o as a,aj as n}from"./chunks/framework._AF764y6.js";const h="/assets/1610876423251-eca89b75-95f5-47f2-ba74-dc4053b640cc_3hoM3YlVG4.3wpfRG3q.png",k="/assets/1610879873780-e3e2771a-a68b-4ba4-8d46-5fcd392e7b8f_IL0rcenNm4.EmgFgAn_.png",c=JSON.parse('{"title":"Linux 网络管理","description":"","frontmatter":{"title":"Linux 网络管理","date":"2023-10-26T22:29:50.000Z","permalink":"/linux/network/","categories":["运维","Linux"],"tags":["linux"],"author":"Manaphy"},"headers":[],"relativePath":"ops/Linux/10.Linux 网络管理.md","filePath":"ops/Linux/10.Linux 网络管理.md","lastUpdated":1744977432000}'),p={name:"ops/Linux/10.Linux 网络管理.md"},t=n(`<h1 id="相关命令" tabindex="-1">相关命令 <a class="header-anchor" href="#相关命令" aria-label="Permalink to “相关命令”">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ifconfig</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#查看网络接口属性</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ifconfig</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eth0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#查看某网卡的配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">route</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#查看路由表</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -lntp</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#查看所有监听端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -antp</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#查看已经建立的TCP连接</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -lutp</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#查看TCP/UDP的状态信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ifup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eth0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#启用eth0网络设备</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ifdown</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eth0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#禁用eth0网络设备</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">iptables</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#查看iptables规则</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ifconfig</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eth0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.1.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netmask</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#配置ip地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dhclient</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eth0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#以dhcp模式启用eth0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">route</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -net</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0/0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Gateway_IP</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#配置默认网关</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">route</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -net</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.0.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netmask</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.0.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.1.1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#配置静态路由到达网络&#39;192.168.0.0/16&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">route</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> del</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0/0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Gateway_IP</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#删除静态路由</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hostname</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#查看主机名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.baidu.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#解析主机名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nslookup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.baidu.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#查询DNS记录,查看域名解析是否正常</span></span></code></pre></div><h1 id="netstat-监控网络状态" tabindex="-1">netstat 监控网络状态 <a class="header-anchor" href="#netstat-监控网络状态" aria-label="Permalink to “netstat 监控网络状态”">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -an</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #按一定顺序排列输出</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #显示哪个进程在调用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -anp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sshd</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #查看服务名为 sshd 的服务的信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -tulnp</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 查看端口占用</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">!</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-a 显示所有连接中的 Socket</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-p 显示占用端口的进程名和PID</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-t 显示 TCP 协议的连接状态</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-u 显示 UDP 协议的连接状态</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-n 以数字形式显示 IP 地址和端口号</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-l 仅列出正在监听的服务状态</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-i 现在网卡列表信息</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-r 显示路由表信息</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@manaphy system]# netstat -an </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">more</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Active</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Internet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connections</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (servers </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> established</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">!</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Proto:网络协议;Local Address:本地地址;Foreign Address:外部地址;State状态</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">State状态类型--&gt;LISTEN:监听;ESTABLISHED:建立连接;TIME_WAIT:超时等待</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">!</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Proto</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Recv-Q</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Send-Q</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Local</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Address</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           Foreign</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Address</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0.0.0.0:22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              0.0.0.0:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               LISTEN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 127.0.0.1:25</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            0.0.0.0:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               LISTEN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># xshell与centos建立连接</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     36</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.111.111:22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      192.168.111.1:61301</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     ESTABLISHED</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># :::22是IPv6的本机ip地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tcp6</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :::22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                   :::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    LISTEN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tcp6</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ::1:25</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  :::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    LISTEN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">raw6</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :::58</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                   :::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                    7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Active</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UNIX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> domain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sockets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (servers </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> established</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Proto</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RefCnt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Flags</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       State</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         I-Node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Path</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unix</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ACC</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     STREAM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     LISTENING</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     19605</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    public/pickup</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unix</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ACC</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     STREAM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     LISTENING</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     19609</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    public/cleanup</span></span></code></pre></div><h1 id="ping-检测主机连接" tabindex="-1">ping 检测主机连接 <a class="header-anchor" href="#ping-检测主机连接" aria-label="Permalink to “ping 检测主机连接”">​</a></h1><blockquote><p>是一种网络检测工具，它主要是用检测远程主机是否正常，或是两部主机间的网线或网卡故障。</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> baidu.com</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">!</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-c 总共发送次数</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-l 指定网卡名称</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-I 每次间隔时间(秒)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-W 最长等待时间(秒)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@Manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# tracepath baidu.com </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#显示数据包到达目的主机时途中经过的所有路由信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 1?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [LOCALHOST]                                         pmtu 1500</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 1:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  10.130.64.18</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                          1.977ms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 1:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  10.33.244.18</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                          1.818ms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 2:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  11.73.1.145</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                           2.721ms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 3:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  11.94.147.205</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                         1.869ms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 4:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  11.94.128.166</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                         4.248ms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> asymm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 5:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  10.102.41.165</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                         4.318ms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 6:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  124.160.190.81</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                        4.846ms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 7:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  124.160.83.5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                          6.738ms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 8:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  219.158.118.45</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                       23.040ms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 9:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  110.242.66.190</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                       28.395ms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">10:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  221.194.45.134</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                       27.958ms</span></span></code></pre></div><p>查看网络流量</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">iftop</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">atop</span></span></code></pre></div><h1 id="固定ip" tabindex="-1">固定ip <a class="header-anchor" href="#固定ip" aria-label="Permalink to “固定ip”">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysconfig/network-scripts/ifcfg-ens32</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #这里ens32每台机器不一定相同</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 内容如下</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TYPE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Ethernet&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #网络类型(通常是 Ethemet)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PROXY_METHOD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;none&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BROWSER_ONLY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;no&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BOOTPROTO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dhcp&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # IP 的配置方法[none|static|bootp|dhcp](引导时不使用协议|静态分配 IP|BOOTP 协议|DHCP 协议)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DEFROUTE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yes&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">IPV4_FAILURE_FATAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;no&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">IPV6INIT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yes&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">IPV6_AUTOCONF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yes&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">IPV6_DEFROUTE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yes&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">IPV6_FAILURE_FATAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;no&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">IPV6_ADDR_GEN_MODE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stable-privacy&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ens32&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UUID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c5417639-5138-438b-a986-7b469b037367&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DEVICE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ens32&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #接口名(设备,网卡)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ONBOOT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yes&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #系统启动的时候网络接口是否有效</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 配置静态ip需要添加以下设置,并修改BOOTPROTO=&quot;static&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">IPADDR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">192.168.111.111</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #IP 地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GATEWAY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">192.168.111.2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #网关</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DNS1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">192.168.111.2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #域名解析器</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#配置完后重启网络或重启系统</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nmcli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connection</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reload</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #AlmaLinux使用该命令</span></span></code></pre></div><p><strong>修改Vmware设置</strong></p><p>子网IP</p><p><img src="`+h+`" alt="image.png"></p><p>完成以上步骤后即可修改为静态ip</p><h1 id="设置主机名和hosts-映射" tabindex="-1">设置主机名和hosts 映射 <a class="header-anchor" href="#设置主机名和hosts-映射" aria-label="Permalink to “设置主机名和hosts 映射”">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/hostname</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #设置主机名,重启后生效</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/hosts</span></span></code></pre></div><h1 id="主机名解析过程分析-hosts、dns" tabindex="-1">主机名解析过程分析(Hosts、DNS) <a class="header-anchor" href="#主机名解析过程分析-hosts、dns" aria-label="Permalink to “主机名解析过程分析(Hosts、DNS)”">​</a></h1><p><strong>Hosts 是什么</strong></p><blockquote><p>一个文本文件，用来记录 IP 和 Hostname(主机名)的映射关系</p></blockquote><p><strong>DNS</strong></p><blockquote><p>DNS，就是 Domain Name System 的缩写，翻译过来就是域名系统 是互联网上作为域名和 IP 地址相互映射的一个<strong>分布式数据库</strong></p></blockquote><p><strong>应用实例</strong>: 用户在浏览器输入了www.baidu.com</p><ol><li>浏览器先检查浏览器缓存中有没有该域名解析 IP 地址，有就先调用这个 IP 完成解析；如果没有，就检查 DNS 解析器缓存，如果有直接返回 IP 完成解析。这两个缓存，可以理解为 本地解析器缓存</li><li>一般来说，当电脑第一次成功访问某一网站后，在一定时间内，浏览器或操作系统会缓存他的 IP 地址（DNS 解析记录）如 在 cmd 窗口中输入</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ipconfig</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /displaydns</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#DNS 域名解析缓存</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ipconfig</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /flushdns</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	#手动清理 dns 缓存</span></span></code></pre></div><ol start="3"><li>如果本地解析器缓存没有找到对应映射，检查系统中 hosts 文件中有没有配置对应的域名 IP 映射，如果有，则完成解析并返回。</li><li>如果 本地 DNS 解析器缓存 和 hosts 文件 中均没有找到对应的 IP，则到域名服务 DNS 进行解析域</li><li>示意图</li></ol><p><img src="`+k+'" alt="image.png"></p>',27),l=[t];function e(F,d,r,g,y,E){return a(),i("div",null,l)}const B=s(p,[["render",e]]);export{c as __pageData,B as default};
