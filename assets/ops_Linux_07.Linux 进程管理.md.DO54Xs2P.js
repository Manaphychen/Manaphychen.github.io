import{_ as s,c as i,o as a,aj as t}from"./chunks/framework._AF764y6.js";const n="/assets/1610886261898-02d7bbbb-8bf7-4101-b04c-206c9ecac3eb_CCEdTfRVJp.iJgmERSn.png",l="/assets/1610886955352-9738077c-4427-46df-8a61-1a3ac15a1d95_q4RflVK2kS.oK8ZofLX.png",c=JSON.parse('{"title":"Linux 进程管理","description":"","frontmatter":{"title":"Linux 进程管理","date":"2023-10-26T22:21:14.000Z","permalink":"/linux/process/","categories":["运维","Linux"],"tags":["linux"],"author":"Manaphy"},"headers":[],"relativePath":"ops/Linux/07.Linux 进程管理.md","filePath":"ops/Linux/07.Linux 进程管理.md","lastUpdated":1743618064000}'),h={name:"ops/Linux/07.Linux 进程管理.md"},k=t(`<blockquote><p>在 LINUX 中，每个执行的程序都称为一个进程。每一个进程都分配一个 ID 号(pid，进程号)</p><p>每个进程都可能以两种方式存在的。前台与后台，所谓前台进程就是用户目前的屏幕上可以进行操作的。后台进程则是实际在操作，但由于屏幕上无法看到的进程，通常使用后台方式执行。</p><p>一般系统的服务都是以后台进程的方式存在，而且都会常驻在系统中。直到关机才才结束。</p></blockquote><h2 id="相关命令" tabindex="-1">相关命令 <a class="header-anchor" href="#相关命令" aria-label="Permalink to “相关命令”">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -ef</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">	#查看所有进程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -ef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> java</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">	#过滤出你需要的进程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -e</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;%C : %p : %z : %a&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sort</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -k5</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -nr</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #查看进程 按内存从大到小排列</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -e</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;%C : %p : %z : %a&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sort</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -nr</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #查看进程 按cpu利用率从大到小排列</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">kill</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">	#kill指定名称的进程</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">kill</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pid</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">	#kill指定pid的进程</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">top</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">	#实时显示进程状态</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">vmstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 20</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">	#每1秒采一次系统状态，采20次</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">iostat</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">	#查看IO读写/CPU使用情况</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sar</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -u</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">	#查询CPU使用情况(1秒一次，共10次)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sar</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">	#查询磁盘性能</span></span></code></pre></div><h2 id="ps-显示系统执行的进程" tabindex="-1">ps 显示系统执行的进程 <a class="header-anchor" href="#ps-显示系统执行的进程" aria-label="Permalink to “ps 显示系统执行的进程”">​</a></h2><p>ps 命令是用来查看目前系统中，有哪些正在执行，以及它们执行的状况，英文全称为processes。可以不加任何参数</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -a</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #显示所有进程（包括其他用户的进程）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -u</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #用户以及其他详细信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -x</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #显示没有控制终端的进程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -aux</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #常用,是SYSTEM风格的,内容如下</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">USER</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        PID</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> %CPU</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> %MEM</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    VSZ</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   RSS</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> TTY</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      STAT</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> START</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   TIME</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> COMMAND</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">          1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.3</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 193588</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  6624</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        Ss</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   17:46</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   0:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /usr/lib/systemd/systemd</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --switched-root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --system</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --deserialize</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 22</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">          2</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        S</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    17:46</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   0:00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [kthreadd]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">          4</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        S</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   17:46</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   0:00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [kworker/0:0H]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">          5</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        S</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    17:46</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   0:00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [kworker/u256:0]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">          6</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        S</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    17:46</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   0:00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [ksoftirqd/0]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">          7</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        S</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    17:46</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   0:00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [migration/0]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -aux</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sshd</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #查看特定的进程</span></span></code></pre></div><table tabindex="0"><thead><tr><th style="text-align:left;"><strong>参数</strong></th><th style="text-align:left;"><strong>作用</strong></th></tr></thead><tbody><tr><td style="text-align:left;">PID</td><td style="text-align:left;">进程号</td></tr><tr><td style="text-align:left;">%CPU</td><td style="text-align:left;">进程占用 CPU 的百分比</td></tr><tr><td style="text-align:left;">%MEM</td><td style="text-align:left;">进程占用物理内存的百分比</td></tr><tr><td style="text-align:left;">VSZ</td><td style="text-align:left;">进程占用的虚拟内存大小(单位：KB)</td></tr><tr><td style="text-align:left;">RSS</td><td style="text-align:left;">进程占用的物理内存大小(单位：KB)</td></tr><tr><td style="text-align:left;">TTY</td><td style="text-align:left;">所在终端</td></tr><tr><td style="text-align:left;">STAT</td><td style="text-align:left;">进程状态</td></tr><tr><td style="text-align:left;">START</td><td style="text-align:left;">进程的启动时间</td></tr><tr><td style="text-align:left;">TIME</td><td style="text-align:left;">CPU 时间，即进程使用 CPU 的总时间</td></tr><tr><td style="text-align:left;">COMMAND</td><td style="text-align:left;">启动进程所用的命令和参数，如果过长会被截断显示</td></tr></tbody></table><p>进程状态5种常见状态</p><ul><li><strong>R</strong>(运行)：进程正在运行或在运行队列中等待</li><li><strong>S</strong>(中断)：进程处于休眠中， 当某个条件形成后或者接收到信号时， 则脱离该状态</li><li><strong>D</strong>(不可中断)：进程不响应系统异步信号，即便用 kill 命令也不能将其中断。</li><li><strong>Z</strong>(僵死)：进程已经终止，但进程描述符依然存在, 直到父进程调用 wait4()系统函数后将进程释放</li><li><strong>T</strong>(停止)：进程收到停止信号后停止运行。</li></ul><p>进程状态5种补充形式</p><ul><li>&lt;：高优先级</li><li>N：低优先级</li><li>L：被锁进内存</li><li>s：包含子进程</li><li>l：多线程 | <strong>UID</strong> | <strong>用户ID</strong> | | :-- | :-- | | PID | 进程ID | | PPID | 父进程ID | | C | CPU 用于计算执行优先级的因子。<br>数值越大，表明进程是 CPU 密集型运算，执行优先级会降低；<br>数值越小，表明进程是 I/O 密集型运算，执行优先级会提高 | | STIME | 进程启动的时间 | | TTY | 完整的终端名称 | | TIME | CPU 时间 | | CMD | 启动进程所用的命令和参数 |</li></ul><h2 id="pstree-查看进程树" tabindex="-1">pstree 查看进程树 <a class="header-anchor" href="#pstree-查看进程树" aria-label="Permalink to “pstree 查看进程树”">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# pstree</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">systemd─┬─NetworkManager───2*[</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{NetworkManager}</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─agetty</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─auditd───</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{auditd}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─crond</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─dbus-daemon───</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{dbus-daemon}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─firewalld───</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{firewalld}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─irqbalance</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─master─┬─pickup</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        │</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        └─qmgr</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─polkitd───6*[</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{polkitd}</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─rsyslogd───2*[</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{rsyslogd}</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─sshd───sshd───bash───pstree</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─systemd-journal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─systemd-logind</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        ├─systemd-udevd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">        └─tuned───4*[</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{tuned}</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> pstree</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #显示进程的 PID</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> pstree</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -u</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #显示进程的所属用户</span></span></code></pre></div><h2 id="systemctl-服务管理" tabindex="-1">systemctl 服务管理 <a class="header-anchor" href="#systemctl-服务管理" aria-label="Permalink to “systemctl 服务管理”">​</a></h2><blockquote><p>服务(service) 本质就是进程，但是是运行在后台的，通常都会监听某个端口，等待其它程序的请求，比如(mysqld , sshd防火墙等)，因此我们又称为守护进程，是 Linux 中非常重要的知识点。</p></blockquote><p><strong>service 管理指令</strong></p><ol><li>service 服务名 [start | stop | restart | reload | status]</li><li>在 CentOS7.0 后很多服务不再使用 service，而是 systemctl</li><li>service 指令管理的服务在 /etc/init.d 查看(绿色的)</li></ol><p><img src="`+n+`" alt="image.png"></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> status</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #查看状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stop</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #停止</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> start</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #开启</span></span></code></pre></div><p><strong>服务的运行级别(runlevel)</strong></p><p>Linux 系统有 7 种运行级别(runlevel)：常用的是级别 3 和 5</p><p>运行级别 0：系统停机状态，系统默认运行级别不能设为 0，否则不能正常启动</p><p>运行级别 1：单用户工作状态，root 权限，用于系统维护，禁止远程登陆</p><p>运行级别 2：多用户状态(没有 NFS)，不支持网络</p><p>运行级别 3：完全的多用户状态(有 NFS)，无界面，登陆后进入控制台命令行模式运行级别 4：系统未使用，保留</p><p>运行级别 5：X11 控制台，登陆后进入图形 GUI 模式</p><p>运行级别 6：系统正常关闭并重启，默认运行级别不能设为 6，否则不能正常启动</p><p>详见 2.4 实用指令→指定运行级别</p><p>开机的流程说明</p><p><img src="`+l+`" alt="image.png"></p><p><strong>chkconfig 指令</strong></p><blockquote><p>通过 chkconfig  命令可以给服务的各个运行级别设置自 启动/关闭 chkconfig 指令管理的服务在 /etc/init.d  查看 注意: Centos7.0  后，很多服务使用 systemctl  管理</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@manaphy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# chkconfig --list </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#0~6代表运行级别;开:表示自启动 关:表示没有自启动</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">netconsole</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     	0:关</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	1:关</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	2:关</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	3:关</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	4:关</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	5:关</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	6:关</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">network</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        	0:关</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	1:关</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	2:开</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	3:开</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	4:开</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	5:开</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	6:关</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">chkconfig</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> network</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --list</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #查看某服务的自启动情况</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">chkconfig</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --level</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> off</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #对network服务操作自启动,命令需要重启生效</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">chkconfig</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --level</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> on</span></span></code></pre></div><p><strong>systemctl 管理指令</strong></p><blockquote><p>基本语法: systemctl [start | stop | restart | status] 服务名 systemctl 指令管理的服务在 /usr/lib/systemd/system 查看</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> list-unit-files</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	[ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 服务名]</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (查看服务开机启动状态, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 可以进行过滤</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 服务名</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (设置服务开机启动)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disable</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 服务名</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (关闭服务开机启动)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is-enabled</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 服务名</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (查询某个服务是否是自启动的)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> firewalld</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #查看防火墙状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> firewalld</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #关闭防火墙(临时生效,重启后失效)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> firewalld</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #开启防火墙(临时生效,重启后失效)</span></span></code></pre></div><p><strong>打开或者关闭指定端口</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --permanent</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --add-port=端口号/协议</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #打开端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --permanent</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --remove-port=端口号/协议</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --reload</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #重新载入才能生效</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --query-port=端口/协议</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #查询端口是否开放</span></span></code></pre></div><h2 id="top-动态监控进程" tabindex="-1">top 动态监控进程 <a class="header-anchor" href="#top-动态监控进程" aria-label="Permalink to “top 动态监控进程”">​</a></h2><blockquote><p>top 与 ps 命令很相似。它们都用来显示正在执行的进程。top 与 ps 最大的不同之处，在于 top 在执行一段时间可以更新正在运行的的进程。</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">top</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #指定top命令每隔几秒更新;默认3秒</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">top</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -i</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #使top不显示任何闲置或者僵死的进程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">top</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #通过指定监控进程ID来仅仅监控某个进程的状态。</span></span></code></pre></div><p><strong>指令内容解析</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#top--&gt;当前时间 系统运行时间,用户数量,负载均衡(分别是1分钟、5分钟、15分钟的负载情况)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">top</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 21:10:03</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> up</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  3:23,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> user,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  load</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> average:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0.00,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 0.01,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.02</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Tasks:--&gt;总任务数:1个在运行,95个在休眠,0个是停止,0个僵死进程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Tasks:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  96</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> total,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> running,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  95</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sleeping,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> stopped,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> zombie</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#%Cpu(s):--&gt;CPU占用情况(百分比):us 用户,sy 系统,id 空闲,wa IO等待,hi 硬中断(Hardware IRQ),si  软中断(Software Interrupts)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">%Cpu(s</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#KiB Mem :--&gt;内存占用情况:总内存,空闲内存,使用内存,缓存</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">KiB</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Mem</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> :</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  1863032</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> total,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  1381280</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> free,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   204136</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> used,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   277616</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> buff/cache</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#KiB Swap:--&gt;swap分区内存使用情况:总内存,空闲内存,使用内存,可获取的内存</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">KiB</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Swap:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  2097148</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> total,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  2097148</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> free,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">        0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> used.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  1506700</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> avail</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Mem</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># PID — 进程id</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># USER — 进程所有者</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># PR — 进程优先级</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># NI — nice值 负值表示高优先级，正值表示低优先级</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># VIRT — 进程使用的虚拟内存总量，单位kb VIRT=SWAP+RES</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># RES — 进程使用的、未被换出的物理内存大小，单位kb RES=CODE+DATA</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># SHR — 共享内存大小，单位kb</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># S — 进程状态  D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># %CPU — 上次更新到现在的CPU时间占用百分比</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># %MEM — 进程使用的物理内存百分比</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># TIME+ — 进程使用的CPU时间总计，单位1/100秒</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># COMMAND — 进程名称（命令名/命令行）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">   PID</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> USER</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      PR</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  NI</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    VIRT</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    RES</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    SHR</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> S</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  %CPU</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> %MEM</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     TIME+</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> COMMAND</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">                                    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  1557</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      20</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  161972</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   2180</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   1548</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> R</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0.3</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   0:00.16</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> top</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">                                        </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">     1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      20</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  193588</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   6700</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   4172</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> S</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.4</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   0:01.01</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> systemd</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">                                    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">     2</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      20</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> S</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   0:00.00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> kthreadd</span></span></code></pre></div><p><strong>交互操作说明</strong></p><table tabindex="0"><thead><tr><th style="text-align:left;">交互按键</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><kbd>q</kbd></td><td style="text-align:left;">退出<code>top</code>命令</td></tr><tr><td style="text-align:left;"><kbd>h</kbd></td><td style="text-align:left;">显示帮助信息，列出可用的键盘快捷键</td></tr><tr><td style="text-align:left;"><kbd>P</kbd></td><td style="text-align:left;">以CPU使用率排序，默认就是此项</td></tr><tr><td style="text-align:left;"><kbd>M</kbd></td><td style="text-align:left;">以内存的使用率排序</td></tr><tr><td style="text-align:left;"><kbd>H</kbd></td><td style="text-align:left;">将线程视图转换为进程视图</td></tr><tr><td style="text-align:left;"><kbd>u</kbd></td><td style="text-align:left;">以用户为单位来显示进程</td></tr><tr><td style="text-align:left;"><kbd>&lt;</kbd>和<kbd>&gt;</kbd></td><td style="text-align:left;">切换进程排序方式</td></tr><tr><td style="text-align:left;"><kbd>s</kbd></td><td style="text-align:left;">修改刷新频率</td></tr><tr><td style="text-align:left;"><kbd>1</kbd></td><td style="text-align:left;">显示单个CPU的多核心详细信息</td></tr><tr><td style="text-align:left;"><kbd>k</kbd></td><td style="text-align:left;">杀死选中的进程</td></tr><tr><td style="text-align:left;"><kbd>r</kbd></td><td style="text-align:left;">修改进程的优先级</td></tr></tbody></table><h2 id="nice-调整进程的优先级" tabindex="-1">nice 调整进程的优先级 <a class="header-anchor" href="#nice-调整进程的优先级" aria-label="Permalink to “nice 调整进程的优先级”">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">nice</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -20</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bash</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #将 bash 服务的优先级调整到最高</span></span></code></pre></div><h2 id="pidof-查询指定服务进程的pid" tabindex="-1">pidof 查询指定服务进程的pid <a class="header-anchor" href="#pidof-查询指定服务进程的pid" aria-label="Permalink to “pidof 查询指定服务进程的pid”">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pidof</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sshd</span></span></code></pre></div><h2 id="kill-终止进程" tabindex="-1">kill 终止进程 <a class="header-anchor" href="#kill-终止进程" aria-label="Permalink to “kill 终止进程”">​</a></h2><blockquote><p>若是某个进程执行一半需要停止时，或是已消了很大的系统资源时，此时可以考虑停止该进程。使用 kill 命令来完成此项任务。</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">kill</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [选项] 进程号 </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#通过进程号终止进程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">killall</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 进程名称</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #通过进程名称杀死进程，也支持通配符</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">kill</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -9</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 进程号</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> #强迫进程立即停止</span></span></code></pre></div>`,52),p=[k];function e(F,d,r,g,y,C){return a(),i("div",null,p)}const o=s(h,[["render",e]]);export{c as __pageData,o as default};
