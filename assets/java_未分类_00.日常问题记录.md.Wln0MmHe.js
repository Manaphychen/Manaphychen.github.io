import{_ as s,c as i,o as a,aj as n}from"./chunks/framework._AF764y6.js";const o=JSON.parse('{"title":"日常问题记录","description":"","frontmatter":{"title":"日常问题记录","date":"2023-11-02T10:41:06.000Z","permalink":"/pages/47beec/","categories":["后端","未分类"],"tags":[null],"author":"Manaphy"},"headers":[],"relativePath":"java/未分类/00.日常问题记录.md","filePath":"java/未分类/00.日常问题记录.md","lastUpdated":1743612544000}'),t={name:"java/未分类/00.日常问题记录.md"},l=n(`<h2 id="解决钉钉服务器出口ip不确定问题" tabindex="-1">解决钉钉服务器出口IP不确定问题 <a class="header-anchor" href="#解决钉钉服务器出口ip不确定问题" aria-label="Permalink to “解决钉钉服务器出口IP不确定问题”">​</a></h2><p><strong>使用OpenSSL生成自签名SSL证书</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#第一步：生成私钥</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># genra 生成RSA私钥</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># -des3 des3算法</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># -out server.key 生成的私钥文件名</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 2048 私钥长度</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> genrsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -des3</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server.pass.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2048</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#输入一个4位以上的密码。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#第二步：去除私钥中的密码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server.pass.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server.key</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#注意：有密码的私钥是server.pass.key，没有密码的私钥是server.key</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#第三步：生成CSR(证书签名请求)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># req 生成证书签名请求</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># -new 新生成</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># -key 私钥文件</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># -out 生成的CSR文件</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># -subj 生成CSR证书的参数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> req</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -new</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -key</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server.csr</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -subj</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;/C=CN/ST=Zhejiang/L=Hangzhou/O=yunkuang/OU=yunkuang/CN=oapi.dingtalk.com&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#第四步：增加openssl配置</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> subjectAltName</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> DNS:oapi.dingtalk.com</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> openssl.cnf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#如果CN为IP，需要设置subjectAltName = IP:127.0.0.1，此处的&quot;127.0.0.1&quot;和上一步中的CN配置一致。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#如果CN为域名，则应该设置为subjectAltName = DNS:www.test.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#第五步：生成自签名SSL证书</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># -days 证书有效期</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -req</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -days</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 365</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server.csr</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -signkey</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -extfile</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> openssl.cnf</span></span></code></pre></div><ul><li><p>subj参数说明如下：</p><table tabindex="0"><thead><tr><th>字段</th><th>字段含义</th><th>示例</th></tr></thead><tbody><tr><td>/C=</td><td>Country 国家</td><td>CN</td></tr><tr><td>/ST=</td><td>State or Province 省</td><td>Guangdong</td></tr><tr><td>/L=</td><td>Location or City 城市</td><td>Guangzhou</td></tr><tr><td>/O=</td><td>Organization 组织或企业</td><td>xdevops</td></tr><tr><td>/OU=</td><td>Organization Unit 部门</td><td>xdevops</td></tr><tr><td>/CN=</td><td>Common Name 域名或IP</td><td>127.0.0.1或者<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fwww.test.com" target="_blank" rel="noreferrer">www.test.com</a></td></tr></tbody></table></li></ul><blockquote><p>X.509证书包含三个文件：key，csr，crt。</p><ul><li>key是服务器上的私钥文件，用于对发送给客户端数据的加密，以及对从客户端接收到数据的解密</li><li>csr是证书签名请求文件，用于提交给证书颁发机构（CA）对证书签名</li><li>crt是由证书颁发机构（CA）签名后的证书，或者是开发者自签名的证书，包含证书持有人的信息，持有人的公钥，以及签署者的签名等信息</li></ul><p>备注：在密码学中，X.509是一个标准，规范了公开秘钥认证、证书吊销列表、授权凭证、凭证路径验证算法等。</p></blockquote><p><strong>证书转化</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#pem 转 crt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.crt</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#crt 转 pem</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.pem</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#cer 转 pem</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.cer</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.pem</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#pem 转cer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -inform</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -outform</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> der</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.cer</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#pfx 转换成 pem</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.pfx</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -nodes</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#pem转der</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -outform</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> der</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.der</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#der转pem</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -inform</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> der</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.cer</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> example.pem</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#pfx转pem</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pkcs12</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> certificate.pfx</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> certificate.cer</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -nodes</span></span></code></pre></div><p>将 crt 证书转化为 pem 证书</p><p>将根证书文件导入到本机</p><p><strong>Nginx配置</strong></p><p>在公网配置Nginx的反向代理，使用如下配置文件</p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    # SSL configuration</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">443</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ssl;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    listen </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[::]:443 ssl;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    ssl </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    ssl_certificate </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">/etc/nginx/cert/oapi.dingtalk.com.pem; </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 公钥路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    ssl_certificate_key </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">/etc/nginx/cert/oapi.dingtalk.com.key; </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 私钥路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    ssl_session_timeout </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5m</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    ssl_protocols </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> SSLv2 SSLv3 TLSv1 TLSv1.2;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    ssl_ciphers </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;HIGH:!aNULL:!MD5 or HIGH:!aNULL:!MD5:!3DES&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    ssl_prefer_server_ciphers </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  on</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">oapi.dingtalk.com;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    location</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> ~</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Host $host;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">        #proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">https://oapi.dingtalk.com;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>修改本地 Hosts 文件，添加一下内容</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">公网ip</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  oapi.dingtalk.com</span></span></code></pre></div><h2 id="解决spring-data-jpa-中-query-默认不能使用-limit函数" tabindex="-1">解决Spring Data JPA 中 @Query 默认不能使用 limit函数 <a class="header-anchor" href="#解决spring-data-jpa-中-query-默认不能使用-limit函数" aria-label="Permalink to “解决Spring Data JPA 中 @Query 默认不能使用 limit函数”">​</a></h2><p>使用原生查询 即 <code>@Query</code> 注解的 <code>nativeQuery</code> 属性设置为 true</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">nativeQuery</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;select * from emp where name=?1 limit 1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Emp </span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findByName</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(String name);</span></span></code></pre></div><h2 id="mybatis使用注解的方式批量插入" tabindex="-1">MyBatis使用注解的方式批量插入 <a class="header-anchor" href="#mybatis使用注解的方式批量插入" aria-label="Permalink to “MyBatis使用注解的方式批量插入”">​</a></h2><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">Insert</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;&lt;script&gt;insert into sys_user_role(user_id, role_id) values &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;&lt;foreach item=&#39;item&#39; index=&#39;index&#39; collection=&#39;list&#39; separator=&#39;,&#39;&gt; &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;(#{item.userId},#{item.roleId}) &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        &quot;&lt;/foreach&gt;&lt;/script&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> batchUserRole</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(List</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">SysUserRole</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> userRoleList);</span></span></code></pre></div><h2 id="rabbitmq-web服务忘记用户名和密码" tabindex="-1">rabbitmq web服务忘记用户名和密码 <a class="header-anchor" href="#rabbitmq-web服务忘记用户名和密码" aria-label="Permalink to “rabbitmq web服务忘记用户名和密码”">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 创建新账户</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">rabbitmqctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add_user</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> newadmin</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> newpassword</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 设置新账户为管理员</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">rabbitmqctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> set_user_tags</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> newadmin</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> administrator</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 设置新账户权限</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">rabbitmqctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> set_permissions</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> newadmin</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;.*&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;.*&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;.*&quot;</span></span></code></pre></div>`,21),p=[l];function h(e,k,r,d,F,g){return a(),i("div",null,p)}const c=s(t,[["render",h]]);export{o as __pageData,c as default};
